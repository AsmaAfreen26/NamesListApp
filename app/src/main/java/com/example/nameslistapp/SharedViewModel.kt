package com.example.nameslistapp
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.delay
import kotlinx.coroutines.withContext
import kotlinx.coroutines.launch
import kotlin.collections.filter
import kotlin.text.contains
import kotlin.text.trim

class SharedViewModel:ViewModel() {
    private val _listItems = MutableLiveData<List<ListItem>>()
    val listItems: MutableLiveData<List<ListItem>> get() = _listItems

    private val _filteredItems = MutableLiveData<List<ListItem>?>()
    val filteredItems: LiveData<List<ListItem>> get() = _filteredItems as LiveData<List<ListItem>>

    init {
        _listItems.value = listOf(
            ListItem("Aabida", "https://picsum.photos/id/10/200/300"),
            ListItem("Asha", "https://picsum.photos/id/11/200/300"),
            ListItem("Aayush", "https://picsum.photos/id/12/200/300"),
            ListItem("Aejaz", "https://picsum.photos/id/13/200/300"),
            ListItem("Ahmed", "https://picsum.photos/id/14/200/300"),
            ListItem("Aisha", "https://picsum.photos/id/15/200/300"),
            ListItem("Alex", "https://picsum.photos/id/16/200/300"),
            ListItem("Aman", "https://picsum.photos/id/17/200/300"),
            ListItem("Amar", "https://picsum.photos/id/18/200/300"),
            ListItem("Ambika", "https://picsum.photos/id/19/200/300"),
            ListItem("Ammar", "https://picsum.photos/id/20/200/300"),
            ListItem("Anand", "https://picsum.photos/id/21/200/300"),
            ListItem("Anil", "https://picsum.photos/id/22/200/300"),
            ListItem("Anjali", "https://picsum.photos/id/23/200/300"),
            ListItem("Anjana", "https://picsum.photos/id/24/200/300"),
            ListItem("Ankita", "https://picsum.photos/id/25/200/300"),
            ListItem("Archana", "https://picsum.photos/id/26/200/300"),
            ListItem("Arif", "https://picsum.photos/id/27/200/300"),
            ListItem("Asghar", "https://picsum.photos/id/28/200/300"),
            ListItem("Asif", "https://picsum.photos/id/29/200/300"),
            ListItem("Babita", "https://picsum.photos/id/10/200/300"),
            ListItem("Badar", "https://picsum.photos/id/11/200/300"),
            ListItem("Bala", "https://picsum.photos/id/12/200/300"),
            ListItem("Basheer", "https://picsum.photos/id/13/200/300"),
            ListItem("Basit", "https://picsum.photos/id/14/200/300"),
            ListItem("Beena", "https://picsum.photos/id/15/200/300"),
            ListItem("Bharti", "https://picsum.photos/id/16/200/300"),
            ListItem("Bijoy", "https://picsum.photos/id/17/200/300"),
            ListItem("Brishti", "https://picsum.photos/id/18/200/300"),
            ListItem("Bushra", "https://picsum.photos/id/19/200/300"),
            ListItem("Chetna", "https://picsum.photos/id/20/200/300"),
            ListItem("Charlie", "https://picsum.photos/id/21/200/300"),
            ListItem("Chirag", "https://picsum.photos/id/22/200/300"),
            ListItem("Chris", "https://picsum.photos/id/23/200/300"),
            ListItem("Danish", "https://picsum.photos/id/24/200/300"),
            ListItem("Daniyal", "https://picsum.photos/id/25/200/300"),
            ListItem("David", "https://picsum.photos/id/26/200/300"),
            ListItem("Dawood", "https://picsum.photos/id/27/200/300"),
            ListItem("Deepti", "https://picsum.photos/id/28/200/300"),
            ListItem("Dhruv", "https://picsum.photos/id/29/200/300"),
            ListItem("Diana", "https://picsum.photos/id/10/200/300"),
            ListItem("Dinesh", "https://picsum.photos/id/11/200/300"),
            ListItem("Divya", "https://picsum.photos/id/12/200/300"),
            ListItem("Drashti", "https://picsum.photos/id/13/200/300"),
            ListItem("Eeshal", "https://picsum.photos/id/14/200/300"),
            ListItem("Elvis", "https://picsum.photos/id/15/200/300"),
            ListItem("Eric", "https://picsum.photos/id/16/200/300"),
            ListItem("Ernie", "https://picsum.photos/id/17/200/300"),
            ListItem("Faisal", "https://picsum.photos/id/18/200/300"),
            ListItem("Farhad", "https://picsum.photos/id/19/200/300"),
            ListItem("Farhan", "https://picsum.photos/id/20/200/300"),
            ListItem("Farooq", "https://picsum.photos/id/21/200/300"),
            ListItem("Farzana", "https://picsum.photos/id/22/200/300"),
            ListItem("Ferdinand", "https://picsum.photos/id/23/200/300"),
            ListItem("Fernandez", "https://picsum.photos/id/24/200/300"),
            ListItem("Feroz", "https://picsum.photos/id/25/200/300"),
            ListItem("Firdaus", "https://picsum.photos/id/26/200/300"),
            ListItem("Gautham", "https://picsum.photos/id/27/200/300"),
            ListItem("Gauri", "https://picsum.photos/id/28/200/300"),
            ListItem("Gayatri", "https://picsum.photos/id/29/200/300"),
            ListItem("Geetanjali", "https://picsum.photos/id/10/200/300"),
            ListItem("Girish", "https://picsum.photos/id/11/200/300"),
            ListItem("Govind", "https://picsum.photos/id/12/200/300"),
            ListItem("Gurmeet", "https://picsum.photos/id/13/200/300"),
            ListItem("Hamza", "https://picsum.photos/id/14/200/300"),
            ListItem("Hardik", "https://picsum.photos/id/15/200/300"),
            ListItem("Hareesh", "https://picsum.photos/id/16/200/300"),
            ListItem("Harjeet", "https://picsum.photos/id/17/200/300"),
            ListItem("Harman", "https://picsum.photos/id/18/200/300"),
            ListItem("Heba", "https://picsum.photos/id/19/200/300"),
            ListItem("Hema", "https://picsum.photos/id/20/200/300"),
            ListItem("Hemant", "https://picsum.photos/id/21/200/300"),
            ListItem("Himanshu", "https://picsum.photos/id/22/200/300"),
            ListItem("Huma", "https://picsum.photos/id/23/200/300"),
            ListItem("Humera", "https://picsum.photos/id/24/200/300"),
            ListItem("Ifteqar", "https://picsum.photos/id/25/200/300"),
            ListItem("Indira", "https://picsum.photos/id/26/200/300"),
            ListItem("Isa", "https://picsum.photos/id/27/200/300"),
            ListItem("Isha", "https://picsum.photos/id/28/200/300"),
            ListItem("Ismail", "https://picsum.photos/id/29/200/300"),
            ListItem("Issac", "https://picsum.photos/id/10/200/300"),
            ListItem("Ivaan", "https://picsum.photos/id/11/200/300"),
            ListItem("Jacky", "https://picsum.photos/id/12/200/300"),
            ListItem("Jamaal", "https://picsum.photos/id/13/200/300"),
            ListItem("Jaspreet", "https://picsum.photos/id/14/200/300"),
            ListItem("Jeevan", "https://picsum.photos/id/15/200/300"),
            ListItem("Jennifer", "https://picsum.photos/id/16/200/300"),
            ListItem("John", "https://picsum.photos/id/17/200/300"),
            ListItem("Joseph", "https://picsum.photos/id/18/200/300"),
            ListItem("Julia", "https://picsum.photos/id/19/200/300"),
            ListItem("Junaid", "https://picsum.photos/id/20/200/300"),
            ListItem("Kabeer", "https://picsum.photos/id/21/200/300"),
            ListItem("Kamal", "https://picsum.photos/id/22/200/300"),
            ListItem("Karan", "https://picsum.photos/id/23/200/300"),
            ListItem("Kartik", "https://picsum.photos/id/24/200/300"),
            ListItem("Kashif", "https://picsum.photos/id/25/200/300"),
            ListItem("Kausar", "https://picsum.photos/id/26/200/300"),
            ListItem("Khushi", "https://picsum.photos/id/27/200/300"),
            ListItem("Kiran", "https://picsum.photos/id/28/200/300"),
            ListItem("Komal", "https://picsum.photos/id/29/200/300"),
            ListItem("Kristine", "https://picsum.photos/id/10/200/300"),
            ListItem("Manisha", "https://picsum.photos/id/11/200/300"),
            ListItem("Manzoor", "https://picsum.photos/id/12/200/300"),
            ListItem("Mariyam", "https://picsum.photos/id/13/200/300"),
            ListItem("Martin", "https://picsum.photos/id/14/200/300"),
            ListItem("Meenakshi", "https://picsum.photos/id/15/200/300"),
            ListItem("Meesha", "https://picsum.photos/id/16/200/300"),
            ListItem("Meghna", "https://picsum.photos/id/17/200/300"),
            ListItem("Melissa", "https://picsum.photos/id/18/200/300"),
            ListItem("Michael", "https://picsum.photos/id/19/200/300"),
            ListItem("Monica", "https://picsum.photos/id/20/200/300"),
            ListItem("Mumtaz", "https://picsum.photos/id/21/200/300"),
            ListItem("Nadia", "https://picsum.photos/id/22/200/300"),
            ListItem("Nancy", "https://picsum.photos/id/23/200/300"),
            ListItem("Nandini", "https://picsum.photos/id/24/200/300"),
            ListItem("Naveen", "https://picsum.photos/id/25/200/300"),
            ListItem("Neeraj", "https://picsum.photos/id/26/200/300"),
            ListItem("Nimesh", "https://picsum.photos/id/27/200/300"),
            ListItem("Nitesh", "https://picsum.photos/id/28/200/300"),
            ListItem("Nivedita", "https://picsum.photos/id/29/200/300"),
            ListItem("Nupur", "https://picsum.photos/id/10/200/300"),
            ListItem("Oliver", "https://picsum.photos/id/11/200/300"),
            ListItem("Omar", "https://picsum.photos/id/12/200/300"),
            ListItem("Osman", "https://picsum.photos/id/13/200/300"),
            ListItem("Oswald", "https://picsum.photos/id/14/200/300"),
            ListItem("Owais", "https://picsum.photos/id/15/200/300"),
            ListItem("Palak", "https://picsum.photos/id/16/200/300"),
            ListItem("Pallavi", "https://picsum.photos/id/17/200/300"),
            ListItem("Pari", "https://picsum.photos/id/18/200/300"),
            ListItem("Parvez", "https://picsum.photos/id/19/200/300"),
            ListItem("Pooja", "https://picsum.photos/id/20/200/300"),
            ListItem("Paramjeet", "https://picsum.photos/id/20/200/300"),
            ListItem("Prateek", "https://picsum.photos/id/21/200/300"),
            ListItem("Preeti", "https://picsum.photos/id/22/200/300"),
            ListItem("Purab", "https://picsum.photos/id/23/200/300"),
            ListItem("Qamar", "https://picsum.photos/id/24/200/300"),
            ListItem("Qizar", "https://picsum.photos/id/25/200/300"),
            ListItem("Qudsia", "https://picsum.photos/id/26/200/300"),
            ListItem("Radhika", "https://picsum.photos/id/27/200/300"),
            ListItem("Rafeeq", "https://picsum.photos/id/28/200/300"),
            ListItem("Rahul", "https://picsum.photos/id/29/200/300"),
            ListItem("Raj", "https://picsum.photos/id/10/200/300"),
            ListItem("Raksha", "https://picsum.photos/id/11/200/300"),
            ListItem("Raman", "https://picsum.photos/id/12/200/300"),
            ListItem("Ranjita", "https://picsum.photos/id/13/200/300"),
            ListItem("Ranveer", "https://picsum.photos/id/14/200/300"),
            ListItem("Risha", "https://picsum.photos/id/15/200/300"),
            ListItem("Ronaldo", "https://picsum.photos/id/16/200/300"),
            ListItem("Sakshi", "https://picsum.photos/id/17/200/300"),
            ListItem("Sandhya", "https://picsum.photos/id/18/200/300"),
            ListItem("Sanjana", "https://picsum.photos/id/19/200/300"),
            ListItem("Shakir", "https://picsum.photos/id/20/200/300"),
            ListItem("Sherlock", "https://picsum.photos/id/21/200/300"),
            ListItem("Simon", "https://picsum.photos/id/22/200/300"),
            ListItem("Srishti", "https://picsum.photos/id/23/200/300"),
            ListItem("Steve", "https://picsum.photos/id/24/200/300"),
            ListItem("Sudheer", "https://picsum.photos/id/25/200/300"),
            ListItem("Suman", "https://picsum.photos/id/26/200/300"),
            ListItem("Susan", "https://picsum.photos/id/27/200/300"),
            ListItem("Sushant", "https://picsum.photos/id/28/200/300"),
            ListItem("Tabassum", "https://picsum.photos/id/29/200/300"),
            ListItem("Tabrez", "https://picsum.photos/id/10/200/300"),
            ListItem("Taimur", "https://picsum.photos/id/11/200/300"),
            ListItem("Tania", "https://picsum.photos/id/12/200/300"),
            ListItem("Tanisha", "https://picsum.photos/id/13/200/300"),
            ListItem("Tasneem", "https://picsum.photos/id/14/200/300"),
            ListItem("Teena", "https://picsum.photos/id/15/200/300"),
            ListItem("Thomas", "https://picsum.photos/id/16/200/300"),
            ListItem("Timon", "https://picsum.photos/id/17/200/300"),
            ListItem("Trupti", "https://picsum.photos/id/18/200/300"),
            ListItem("Uday", "https://picsum.photos/id/19/200/300"),
            ListItem("Upen", "https://picsum.photos/id/20/200/300"),
            ListItem("Urvashi", "https://picsum.photos/id/21/200/300"),
            ListItem("Uzair", "https://picsum.photos/id/22/200/300"),
            ListItem("Uzma", "https://picsum.photos/id/23/200/300"),
            ListItem("Vandana", "https://picsum.photos/id/24/200/300"),
            ListItem("Vikas", "https://picsum.photos/id/25/200/300"),
            ListItem("Virendra", "https://picsum.photos/id/26/200/300"),
            ListItem("Vivian", "https://picsum.photos/id/27/200/300"),
            ListItem("Wendy", "https://picsum.photos/id/28/200/300"),
            ListItem("William", "https://picsum.photos/id/29/200/300"),
            ListItem("Wilma", "https://picsum.photos/id/10/200/300"),
            ListItem("Yasmin", "https://picsum.photos/id/11/200/300"),
            ListItem("Yumna", "https://picsum.photos/id/12/200/300"),
            ListItem("Yuvraj", "https://picsum.photos/id/13/200/300"),
            ListItem("Zahid", "https://picsum.photos/id/14/200/300"),
            ListItem("Zameer", "https://picsum.photos/id/15/200/300"),
            ListItem("Zara", "https://picsum.photos/id/16/200/300"),
            ListItem("Zeesha", "https://picsum.photos/id/17/200/300")

        )
    }

    fun filterItems(query: String) {
        viewModelScope.launch {
            val filtered = withContext(Dispatchers.Default) {
                _listItems.value?.filter {
                    it.name.contains(query, ignoreCase = true)
                } ?: emptyList()
            }
            _filteredItems.postValue(filtered)
        }

    }
}
